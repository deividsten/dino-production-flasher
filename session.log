--- Session Log Started: 2025-10-28 16:53:39 ---

('Firebase', '‚ö†Ô∏è Firebase not available')
üöÄ Starting QR Scanner Workflow - Field ready for scanning!
üì± Position QR scanner and scan toy code...
üîß Toy ID parsed from Bondu URL: 'https://bondu.com/toy/hha2ck' -> 'toy_hha2ck'
üìã Input received: https://bondu.com/toy/hha2ck
üÜî Processed Toy ID: toy_hha2ck
üé® Dino color selected: #fde3e3
‚úÖ ESP32 detected on port COM31
‚úÖ ESP32 detected on port COM31
üé® Dino color selected: #fde3e3
‚úÖ Device ready on port: COM31
üéØ Using default hardware version: 1.9.1
‚úÖ ESP32 detected on port COM31
üöÄ Auto-starting Testing & eFuse flash...
--- Processing new device on COM31 ---
Attempting to burn eFuse with version 1.9.1...
Attempting to burn eFuse with version 1.9.1...
Attempting to reset device into download mode...
Device reset successful, proceeding with eFuse burning...
[OK] eFuse burned successfully.
Burn command succeeded. Verifying by reading back eFuse...
Attempting to read eFuse from COM31...
[OK] Found raw eFuse version: 1.9.1
[OK] Verification successful. Version 1.9.1 is burned.
eFuse burning completed successfully. Starting firmware flash...
-- Starting testing flash for HW 1.9.1 on COM31 --
('show_progress',)
-- Starting testing flash for HW 1.9.1 on COM31 --
Downloading testing firmware for HW 1.9.1...
Found compatible build: qc
Downloading bootloader.bin...
Downloading magical-toys.bin...
Downloading partition-table.bin...
Downloading ota_data_initial.bin...
[OK] Testing firmware for 1.9.1 downloaded successfully.
Warning: Deprecated: Option '--flash_mode' is deprecated. Use '--flash-mode' instead.
Warning: Deprecated: Option '--flash_freq' is deprecated. Use '--flash-freq' instead.
Warning: Deprecated: Option '--flash_size' is deprecated. Use '--flash-size' instead.
Warning: Deprecated: Choice 'default_reset' for option '--before' is deprecated. Use 'default-reset' instead.
Warning: Deprecated: Choice 'hard_reset' for option '--after' is deprecated. Use 'hard-reset' instead.
Warning: Deprecated: Command 'write_flash' is deprecated. Use 'write-flash' instead.
esptool v5.1.0
Serial port COM31:
Connecting....
Connected to ESP32-S3 on COM31:
Chip type:          ESP32-S3 (QFN56) (revision v0.2)
Features:           Wi-Fi, BT 5 (LE), Dual Core + LP Core, 240MHz, Embedded PSRAM 8MB (AP_3v3)
Crystal frequency:  40MHz
USB mode:           USB-Serial/JTAG
MAC:                8c:bf:ea:85:39:8c

Uploading stub flasher...
Running stub flasher...
Stub flasher running.
Changing baud rate to 460800...
Changed.

Configuring flash size...
Flash will be erased from 0x00000000 to 0x00005fff...
Flash will be erased from 0x00260000 to 0x003fafff...
Flash will be erased from 0x00010000 to 0x00010fff...
Flash will be erased from 0x00015000 to 0x00016fff...
SHA digest in image updated.
Compressed 20976 bytes to 13360...

('progress_update', 'Flashing... 0.0%')

('progress_update', 'Flashing... 100.0%')
Wrote 20976 bytes (13360 compressed) at 0x00000000 in 0.2 seconds (1081.7 kbit/s).
Hash of data verified.
Compressed 1681376 bytes to 1014463...

('progress_update', 'Flashing... 0.0%')
('progress', 0)

('progress_update', 'Flashing... 1.6%')
('progress', 1)

('progress_update', 'Flashing... 3.2%')
('progress', 3)

('progress_update', 'Flashing... 4.8%')
('progress', 4)

('progress_update', 'Flashing... 6.5%')
('progress', 6)

('progress_update', 'Flashing... 8.1%')
('progress', 8)

('progress_update', 'Flashing... 9.7%')
('progress', 9)

('progress_update', 'Flashing... 11.3%')
('progress', 11)

('progress_update', 'Flashing... 12.9%')
('progress', 12)

('progress_update', 'Flashing... 14.5%')
('progress', 14)

('progress_update', 'Flashing... 16.2%')
('progress', 16)

('progress_update', 'Flashing... 17.8%')
('progress', 17)

('progress_update', 'Flashing... 19.4%')
('progress', 19)

('progress_update', 'Flashing... 21.0%')
('progress', 21)

('progress_update', 'Flashing... 22.6%')
('progress', 22)

('progress_update', 'Flashing... 24.2%')
('progress', 24)

('progress_update', 'Flashing... 25.8%')
('progress', 25)

('progress_update', 'Flashing... 27.5%')
('progress', 27)

('progress_update', 'Flashing... 29.1%')
('progress', 29)

('progress_update', 'Flashing... 30.7%')
('progress', 30)

('progress_update', 'Flashing... 32.3%')
('progress', 32)

('progress_update', 'Flashing... 33.9%')
('progress', 33)

('progress_update', 'Flashing... 35.5%')
('progress', 35)

('progress_update', 'Flashing... 37.1%')
('progress', 37)

('progress_update', 'Flashing... 38.8%')
('progress', 38)

('progress_update', 'Flashing... 40.4%')
('progress', 40)

('progress_update', 'Flashing... 42.0%')
('progress', 42)

('progress_update', 'Flashing... 43.6%')
('progress', 43)

('progress_update', 'Flashing... 45.2%')
('progress', 45)

('progress_update', 'Flashing... 46.8%')
('progress', 46)

('progress_update', 'Flashing... 48.5%')
('progress', 48)

('progress_update', 'Flashing... 50.1%')
('progress', 50)

('progress_update', 'Flashing... 51.7%')
('progress', 51)

('progress_update', 'Flashing... 53.3%')
('progress', 53)

('progress_update', 'Flashing... 54.9%')
('progress', 54)

('progress_update', 'Flashing... 56.5%')
('progress', 56)

('progress_update', 'Flashing... 58.1%')
('progress', 58)

('progress_update', 'Flashing... 59.8%')
('progress', 59)

('progress_update', 'Flashing... 61.4%')
('progress', 61)

('progress_update', 'Flashing... 63.0%')
('progress', 63)

('progress_update', 'Flashing... 64.6%')
('progress', 64)

('progress_update', 'Flashing... 66.2%')
('progress', 66)

('progress_update', 'Flashing... 67.8%')
('progress', 67)

('progress_update', 'Flashing... 69.4%')
('progress', 69)

('progress_update', 'Flashing... 71.1%')
('progress', 71)

('progress_update', 'Flashing... 72.7%')
('progress', 72)

('progress_update', 'Flashing... 74.3%')
('progress', 74)

('progress_update', 'Flashing... 75.9%')
('progress', 75)

('progress_update', 'Flashing... 77.5%')
('progress', 77)

('progress_update', 'Flashing... 79.1%')
('progress', 79)

('progress_update', 'Flashing... 80.8%')
('progress', 80)

('progress_update', 'Flashing... 82.4%')
('progress', 82)

('progress_update', 'Flashing... 84.0%')
('progress', 84)

('progress_update', 'Flashing... 85.6%')
('progress', 85)

('progress_update', 'Flashing... 87.2%')
('progress', 87)

('progress_update', 'Flashing... 88.8%')
('progress', 88)

('progress_update', 'Flashing... 90.4%')
('progress', 90)

('progress_update', 'Flashing... 92.1%')
('progress', 92)

('progress_update', 'Flashing... 93.7%')
('progress', 93)

('progress_update', 'Flashing... 95.3%')
('progress', 95)

('progress_update', 'Flashing... 96.9%')
('progress', 96)

('progress_update', 'Flashing... 98.5%')
('progress', 98)

('progress_update', 'Flashing... 100.0%')
('progress', 100)
Wrote 1681376 bytes (1014463 compressed) at 0x00260000 in 8.6 seconds (1558.4 kbit/s).
Hash of data verified.
Compressed 3072 bytes to 176...

('progress_update', 'Flashing... 0.0%')

('progress_update', 'Flashing... 100.0%')
Wrote 3072 bytes (176 compressed) at 0x00010000 in 0.0 seconds (1887.7 kbit/s).
Hash of data verified.
Compressed 8192 bytes to 31...

('progress_update', 'Flashing... 0.0%')

('progress_update', 'Flashing... 100.0%')
Wrote 8192 bytes (31 compressed) at 0x00015000 in 0.0 seconds (2127.2 kbit/s).
Hash of data verified.

Hard resetting via RTS pin...
[OK] Flash successful!
('hide_progress',)
-- Finished flashing COM31 --
Flash completed successfully. Starting serial monitor...
--- Serial monitor started for COM31 ---
‚úÖ ESP32 detected on port COM31
I (103) esp_image: segment 2: paddr=002c0020 vaddr=42000020 sizeI (805) esp_psram: SPI SRAM memory test OK
I (813) cpu_start: Pro cpu start user code
I (813) cpu_start: cpu freq: 240000000 Hz
I (814) app_init: Application information:
I (814) app_init: Project name:     simple-speaker
I (814) app_init: App version:      0.1.2-dev
I (814) app_init: Compile time:     Sep  5 2025 13:46:33
I (814) app_init: ELF file SHA256:  e685db1b8...
I (814) app_init: ESP-IDF:          v5.4.1
I (814) efuse_init: Min chip rev:     v0.0
I (815) efuse_init: Max chip rev:     v0.99
I (815) efuse_init: Chip rev:         v0.2
I (815) heap_init: Initializing. RAM available for dynamic allocation:
I (815) heap_init: At 3FCB24C8 len 00037248 (220 KiB): RAM
I (816) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (816) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM
I (816) heap_init: At 600FE120 len 00001EC8 (7 KiB): RTCRAM
I (1044) esp_psram: Adding pool of 7808K of PSRAM memory to heap allocator
I (1045) spi_flash: detected chip: generic
I (1045) spi_flash: flash io: dio
I (1046) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (1046) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (1046) coexist: coex firmware version: e727207
I (1047) coexist: coexist rom version e7ae62f
I (1048) main_task: Started on CPU0
I (1058) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1058) main_task: Calling app_main()
I (1058) recording_mode: Standalone recording demo app_main starting
I (1068) deep_sleep: Initializing deep sleep manager...
I (1068) deep_sleep: üîç DEBUG: NVS flash initialized successfully for deep sleep manager
I (1068) deep_sleep: üîç DEBUG: Attempting to read OTA reboot flag from NVS...
I (1068) deep_sleep: üîç DEBUG: NVS namespace 'deep_sleep' not found: ESP_ERR_NVS_NOT_FOUND (assuming no OTA reboot flag)
I (1068) deep_sleep: RTC memory invalid or first boot - initializing
I (1068) deep_sleep: Wake button GPIO1 initialized (current state: 1)
I (1068) deep_sleep: === Deep Sleep State ===
I (1068) deep_sleep: Magic number: 0xdeadbeef
I (1068) deep_sleep: First boot: true
I (1068) deep_sleep: Wake count: 0
I (1068) deep_sleep: Normal operation enabled: false
I (1068) deep_sleep: =======================
I (1068) deep_sleep: Deep sleep manager initialized successfully
I (1068) button_handler: Initializing interrupt-based button system...
I (1068) button_handler: Interrupt-based button system initialized successfully
I (1068) button_handler: Button on GPIO1 - Short press: sleep, Long press (5s): recording, Very long (10s): factory reset
I (1068) SHARED_I2C: Initializing shared I2C bus...
I (1068) SHARED_I2C: ‚úÖ Shared I2C bus initialized successfully (SCL: GPIO40, SDA: GPIO41)
I (1068) BATTERY_MONITOR: Initializing battery monitoring system...
I (1068) BATTERY_MONITOR: Features: Coulomb SOC, Current-based charging, Learning persistence
I (1068) SHARED_I2C: ‚úÖ Added I2C device: address=0x36, speed=100000 Hz
I (1068) BATTERY_MONITOR: MAX17055 I2C device initialized on shared bus (address 0x36, speed 100kHz)
I (1068) BATTERY_MONITOR: ‚è±Ô∏è  Waiting 200ms for MAX17055 power stabilization...
I (1368) BATTERY_MONITOR: ‚úÖ MAX17055 communication test successful (STATUS=0x0082)
I (1368) BATTERY_MONITOR: Initializing MAX17055 fuel gauge...
I (1368) BATTERY_MONITOR: No saved parameters found, using learned defaults
I (1368) BATTERY_MONITOR: Applied learned parameters to fuel gauge
I (1368) BATTERY_MONITOR: üîç ===== FUEL GAUGE LEARNING DIAGNOSTICS =====
I (1368) BATTERY_MONITOR: üîç   FSTAT: 0x1108
I (1368) BATTERY_MONITOR: üîç     - Data Ready: YES
I (1368) BATTERY_MONITOR: üîç     - Relaxation: None
I (1368) BATTERY_MONITOR: üîç     - Full Qualified: YES
I (1368) BATTERY_MONITOR: üîç   LearnCFG: 0x4496
I (1368) BATTERY_MONITOR: üîç     - Learning Stage: 1
I (1368) BATTERY_MONITOR: üîç     - Learning Active: YES
I (1368) BATTERY_MONITOR: üîç   ModelCFG: 0x0400
I (1368) BATTERY_MONITOR: üîç     - Model ID: 0
I (1368) BATTERY_MONITOR: üîç     - Refresh: COMPLETE
I (1368) BATTERY_MONITOR: üîç ============================================
I (1368) BATTERY_MONITOR: üéØ Enabling MAX17055 learning algorithm...
I (1388) BATTERY_MONITOR: üéØ ‚úÖ Fuel gauge learning algorithm enabled successfully!
I (1388) BATTERY_MONITOR: MAX17055 initialization complete
I (1388) BATTERY_MONITOR: ‚úÖ FG_GPOUT (GPIO16) configured for MAX17055 alerts
I (1388) BATTERY_MONITOR: üîî Configuring MAX17055 SOC alert for 1% threshold...
I (1388) BATTERY_MONITOR: ‚úÖ SOC alert configured: Min=1%, Max=disabled
I (1388) BATTERY_MONITOR: ‚úÖ MAX17055 SOC alerts enabled - will trigger at 1% SOC
I (1388) BATTERY_MONITOR: Battery monitoring system initialized successfully
I (1388) recording_mode: üîã Checking critical battery protection...
I (1388) recording_mode: üîã Battery voltage: 3.380 V
I (1388) recording_mode: ‚úÖ Battery voltage OK: 3.380 V >= 2.3V
I (1388) BATTERY_MONITOR: Battery monitoring task started successfully
I (1388) BATTERY_MONITOR: Battery monitoring task started
I (1388) recording_mode: üîã Battery monitoring task started
I (1388) power_source_test: üîå Initializing power source test (TPS2117DRL control)
I (1388) power_source_test: ‚úÖ Power source test initialized (initial: BATTERY)
I (1388) led_manager: Initializing LED manager...
I (1388) neopixel: Initializing neopixel LEDs on PDM hardware (PDM_v2)
I (1388) neopixel: Boost enable pin configured and set high (normal logic)
I (1388) neopixel: Neopixel LED system initialized successfully on pin 8
I (1388) neopixel: Configured for 9 WS2812B LEDs
I (1388) led_manager: Setting initial LED state to normal operation (white)
I (1398) led_manager: Applying LED state: Normal Operation (White)
I (1398) neopixel: Stopping any running LED animation
I (1398) neopixel: LED animation stopped
I (1398) led_manager: LED manager initialized successfully (hardware available: YES)
I (1398) recording_mode: USB_SENSE (GPIO6) is HIGH
I (1398) BATTERY_MONITOR: üîç Coulomb SoC calc: REG_QH=0x0573 ‚Üí 697.5 mAh ‚Üí 11.6% SoC
I (1398) recording_mode: üîÑ Creating button processing task...
I (1398) BATTERY_MONITOR: === BATTERY STATUS ===
I (1398) recording_mode: üîÑ Button processing task started
I (1398) recording_mode: Audio test disabled; skipping record/playback loop
I (1398) BATTERY_MONITOR: Present:     YES
I (1398) MFG_WIFI: üîä WiFi test disabled - initializing Bluetooth immediately...
I (1398) BATTERY_MONITOR: Voltage:     3.380 V
I (1398) BATTERY_MONITOR: USB Power:   DETECTED
I (1398) BLE_INIT: BT controller compile version [d74042a]
I (1398) BATTERY_MONITOR: Charge IC:   CHARGING IN PROGRESS (STAT1=1, STAT2=0)
I (1398) BATTERY_MONITOR: Current:     599.7 mA
I (1398) BATTERY_MONITOR: Avg Current: 579.8 mA
I (1398) BATTERY_MONITOR: SOC:         11.6%
I (1398) BATTERY_MONITOR: Temperature: 28.0¬∞C
I (1398) BATTERY_MONITOR: Cycles:      11
I (1398) BLE_INIT: Bluetooth MAC: 8c:bf:ea:85:39:8e
üì± Captured Bluetooth MAC: 8C:BF:EA:85:39:8E
I (1398) BATTERY_MONITOR: Charging:    YES
I (1398) BATTERY_MONITOR: Session:     #0
I (1398) BATTERY_MONITOR: ======================
I (1398) BATTERY_MONITOR: üîã Battery is charging (599.7 mA)
I (1398) phy_init: phy_version 700,8582a7fd,Feb 10 2025,20:13:11
W (1398) phy_init: failed to load RF calibration data (0x1102), falling back to full calibration
I (1428) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(2)
I (1458) BLE_HANDLER: Bluetooth LE initialized successfully
I (1458) device_utils: Device ID initialized: 8cbfea85398c
I (1458) device_utils: MAC Address: 8C:BF:EA:85:39:8C
I (1458) BLE_HANDLER: === CONFIGURING BLE ADVERTISING ===
I (1458) BLE_HANDLER: Setting device name to: Toy-398C
üì± Captured Bluetooth Name: Toy-398C
I (1458) BLE_HANDLER: BLE Advertising Configuration:
I (1458) BLE_HANDLER: üì° Service UUID: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (1458) BLE_HANDLER: üì± Device Name: Toy-398C (in scan response)
I (1458) BLE_HANDLER: ‚è±Ô∏è  Advertising Interval: 32 - 64 (0.625ms units)
I (1458) BLE_HANDLER: üîç Discoverable: YES (General Discoverable)
I (1458) BLE_HANDLER: üì∂ TX Power: Included in scan response
I (1458) BLE_HANDLER: Service UUID bytes (little-endian):
I (1458) BLE_HANDLER: cd e8 e7 fb f1 16 0d 94 4e 47 5b ad ca 98 74 a0
I (1458) BLE_HANDLER: üöÄ Starting BLE advertising process for device: Toy-398C
I (1458) BLE_HANDLER: React Native app should look for service UUID: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (1458) MFG_WIFI: üîä Bluetooth initialized and advertising as: Toy-398C
I (1458) recording_mode: ‚úÖ System initialization complete - main thread exiting cleanly
I (1458) main_task: Returned from app_main()
I (1468) BLE_HANDLER: GAP event: 14
I (1478) BLE_HANDLER: GAP event: 15
I (1478) BLE_HANDLER: GATT server registered, app_id: 0000
I (1478) BLE_HANDLER: Service creation initiated successfully
I (1478) BLE_HANDLER: Service created successfully, service_handle: 40
I (1478) BLE_HANDLER: Created service with UUID: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (1478) BLE_HANDLER: React Native app should look for: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (1478) BLE_HANDLER: Adding characteristic: Device Info (index: 0)
I (1478) BLE_HANDLER: GATTS event: 12
I (1478) BLE_HANDLER: Characteristic added successfully, char_handle: 42
I (1478) BLE_HANDLER: Adding characteristic: WiFi Config (index: 1)
I (1478) BLE_HANDLER: ‚úÖ Added CCCD descriptor for WiFi Config characteristic
I (1478) BLE_HANDLER: Characteristic added successfully, char_handle: 44
I (1478) BLE_HANDLER: Adding characteristic: SSID (index: 2)
I (1478) BLE_HANDLER: ‚úÖ Added CCCD descriptor for SSID characteristic
I (1478) BLE_HANDLER: Characteristic descriptor added - handle: 45
I (1478) BLE_HANDLER: Characteristic added successfully, char_handle: 47
I (1478) BLE_HANDLER: Adding characteristic: Connectivity (index: 3)
I (1478) BLE_HANDLER: Characteristic descriptor added - handle: 48
I (1478) BLE_HANDLER: Characteristic added successfully, char_handle: 50
I (1478) BLE_HANDLER: Adding characteristic: Log (index: 4)
I (1478) BLE_HANDLER: ‚úÖ Added CCCD descriptor for Log characteristic
I (1488) BLE_HANDLER: Characteristic added successfully, char_handle: 52
I (1488) BLE_HANDLER: Adding characteristic: QA Control (index: 5)
I (1488) BLE_HANDLER: Characteristic descriptor added - handle: 53
I (1488) BLE_HANDLER: Characteristic added successfully, char_handle: 55
I (1488) BLE_HANDLER: Adding characteristic: QA Events (index: 6)
I (1488) BLE_HANDLER: ‚úÖ Added CCCD descriptor for QA Events characteristic
I (1488) BLE_HANDLER: Characteristic added successfully, char_handle: 57
I (1488) BLE_HANDLER: Connection status changed to: ADVERTISING
I (1488) BLE_HANDLER: ‚úì BLE advertising started with optimized configuration
I (1488) BLE_HANDLER: ‚úì Service UUID in advertising data: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (1488) BLE_HANDLER: ‚úì Device name in scan response: Toy-398C
I (1488) BLE_HANDLER: ‚úì React Native app should now be able to discover this device
I (1488) BLE_HANDLER: Characteristic descriptor added - handle: 58
I (1488) BLE_HANDLER: ‚úì Advertising data configured successfully
I (1488) BLE_HANDLER: ‚úì Service UUID a07498ca-ad5b-474e-940d-16f1fbe7e8cd is now in advertising data
I (1488) BLE_HANDLER: ‚úì Scan response data set complete successfully
I (1488) BLE_HANDLER: ‚úì Device name and TX power are now in scan response
I (1488) BLE_HANDLER: üöÄ ADVERTISING STARTED SUCCESSFULLY!
I (1488) BLE_HANDLER: üîç React Native app should now be able to find this device
I (1488) BLE_HANDLER: üì± Device appears as: Toy-398C
I (1488) BLE_HANDLER: üîó Service UUID: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (1498) BLE_HANDLER: ‚ö° The device is now discoverable and ready for connection!
üöÄ BLE details captured. Auto-starting Bluetooth QC...
üü¶ Starting Bluetooth QC for MAC: 8C:BF:EA:85:39:8E...
‚è≥ Waiting for device to signal it's ready for connection...
‚è≥ Device signaled ready. Waiting additional 5 seconds for full initialization...
üîé Attempt 1/3: Scanning for device with MAC 8C:BF:EA:85:39:8E...
- Found 58 BLE devices in this scan.
- Device 0: Toy-398C (8C:BF:EA:85:39:8E)
- Device 1: Unknown (8C:26:AA:EF:C3:4C)
- Device 2: GBK_H6147_B1FF (D4:AD:FC:11:B1:FF)
- Device 3: LE-Maestro (5D:0A:BF:4C:C4:C4)
- Device 4: Unknown (46:5B:0B:18:58:D4)
- Device 5: Unknown (77:9C:FB:CC:41:E3)
- Device 6: 8cbfea849750 (8C:BF:EA:84:97:52)
- Device 7: Unknown (6D:65:D7:21:72:20)
- Device 8: Unknown (56:8A:26:23:0F:FF)
- Device 9: Unknown (42:29:51:42:C0:EC)
- Device 10: Unknown (51:26:F1:D6:DE:D8)
- Device 11: Unknown (7C:A1:44:C0:14:25)
- Device 12: Unknown (43:2A:B7:9E:A3:4C)
- Device 13: Unknown (55:C7:20:A7:D2:71)
- Device 14: Unknown (64:E7:D8:8C:E2:65)
- Device 15: Glowrium-H1_DF3A62 (24:EC:4A:DF:3A:62)
- Device 16: Unknown (42:80:0E:12:F2:18)
- Device 17: 98a316eefac4 (98:A3:16:EE:FA:C6)
- Device 18: Unknown (CB:86:1C:46:EA:1D)
- Device 19: Unknown (5E:BE:A7:7D:5C:28)
- Device 20: Unknown (7B:B8:3E:19:58:54)
- Device 21: Unknown (7C:AE:E6:9B:FB:1A)
- Device 22: Unknown (47:0F:E5:7F:CB:3D)
- Device 23: Unknown (37:E5:2C:D3:6A:BC)
- Device 24: Unknown (01:05:A2:FE:DC:3B)
- Device 25: Unknown (18:64:3D:B3:38:2A)
- Device 26: Unknown (4A:29:A9:37:A6:0E)
- Device 27: Unknown (78:C7:09:6B:9F:F0)
- Device 28: Unknown (7B:28:C4:98:8F:E1)
- Device 29: Unknown (62:9F:30:E3:90:BF)
- Device 30: Unknown (7A:9C:14:F3:F7:00)
- Device 31: Unknown (72:1A:F6:7C:90:DB)
- Device 32: Unknown (72:03:FC:BB:A2:7C)
- Device 33: Unknown (E5:2B:BD:0C:5B:CD)
- Device 34: Unknown (63:5A:7B:2C:DD:9F)
- Device 35: Unknown (59:51:9D:7F:84:0F)
- Device 36: Unknown (4D:B5:BF:99:76:4A)
- Device 37: GBK_H6147_0505 (D4:AD:FC:9E:05:05)
- Device 38: Unknown (4F:C4:8F:F5:C2:DA)
- Device 39: Unknown (61:5D:D8:92:E3:99)
- Device 40: Unknown (7F:1F:04:7D:60:F2)
- Device 41: Unknown (46:22:63:C5:59:DB)
- Device 42: Unknown (64:E7:D8:63:55:8D)
- Device 43: Unknown (60:38:E9:FE:9F:40)
- Device 44: Unknown (D9:E6:21:80:9B:1F)
- Device 45: Unknown (4B:34:D8:FB:A6:96)
- Device 46: Unknown (61:FB:59:79:0D:5A)
- Device 47: Unknown (48:3B:25:C2:6A:57)
- Device 48: Glowrium-H1_FCE726 (48:CA:43:FC:E7:26)
- Device 49: Unknown (CD:0A:5F:19:75:08)
- Device 50: Unknown (41:E0:B6:7A:1C:D3)
- Device 51: Unknown (C3:9A:FD:CC:74:4B)
- Device 52: Unknown (FE:63:45:B1:D5:17)
- Device 53: Unknown (70:1E:5D:3E:55:83)
- Device 54: Unknown (5B:1F:4F:D9:D6:C0)
- Device 55: Unknown (D1:40:F9:7A:BC:AC)
- Device 56: Unknown (6F:B3:6A:DC:F4:A3)
- Device 57: Unknown (46:86:40:18:AC:95)
üéØ MAC Address match found: Toy-398C at 8C:BF:EA:85:39:8E
‚úÖ Found device. Attempting to connect to 8C:BF:EA:85:39:8E...
{'level': 'info', 'message': 'Connecting to device: 8C:BF:EA:85:39:8E', 'data': None, 'timestamp': 1761695693.1587176}
I (14478) BLE_HANDLER: GAP event: 60
I (14588) BLE_HANDLER: üîó CLIENT CONNECTED!
I (14588) BLE_HANDLER: üì± Client Details:
I (14588) BLE_HANDLER:    Connection ID: 0
I (14588) BLE_HANDLER:    MAC Address: 6c:94:66:36:ec:e5
I (14588) BLE_HANDLER:    Device Serial: 8cbfea85398c
I (14588) BLE_HANDLER:    Device Name: Toy-398C
I (14588) BLE_HANDLER: ‚úÖ Ready for characteristic read/write operations
I (14588) BLE_HANDLER: Connection status changed to: CONNECTED
I (14588) BLE_HANDLER: üì° Requesting connection params: min_int=16, max_int=32, latency=0, timeout=400
I (14598) BLE_HANDLER: üîç Starting continuous WiFi scanning for BLE client
I (14598) wifi_helper: Starting continuous WiFi scanning every 15000 ms
I (14598) wifi_helper: üîß WiFi Buffer Config: RX Static=24, RX Dynamic=64, TX Dynamic=64, BA Win=16
I (14598) pp: pp rom version: e7ae62f
I (14598) net80211: net80211 rom version: e7ae62f
I (14608) wifi:wifi driver task: 3fcd94bc, prio:23, stack:6656, core=0
I (14608) wifi:wifi firmware version: 79fa3f41ba
I (14608) wifi:wifi certification version: v7.0
I (14608) wifi:config NVS flash: enabled
I (14608) wifi:config nano formatting: disabled
I (14608) wifi:Init data frame dynamic rx buffer num: 64
I (14608) wifi:Init static rx mgmt buffer num: 5
I (14608) wifi:Init management short buffer num: 32
I (14608) wifi:Init static tx buffer num: 16
I (14608) wifi:Init tx cache buffer num: 32
I (14608) wifi:Init static tx FG buffer num: 2
I (14608) wifi:Init static rx buffer size: 1600
I (14608) wifi:Init static rx buffer num: 24
I (14608) wifi:Init dynamic rx buffer num: 64
I (14618) wifi_init: rx ba win: 32
I (14618) wifi_init: accept mbox: 6
I (14618) wifi_init: tcpip mbox: 64
I (14618) wifi_init: udp mbox: 6
I (14618) wifi_init: tcp mbox: 6
I (14618) wifi_init: tcp tx win: 65535
I (14618) wifi_init: tcp rx win: 65535
I (14618) wifi_init: tcp mss: 1440
I (14618) wifi_init: WiFi/LWIP prefer SPIRAM
I (14618) wifi_init: WiFi IRAM OP enabled
I (14618) wifi_init: WiFi RX IRAM OP enabled
I (14618) wifi_helper: üöÄ Applying WiFi performance optimizations...
I (14618) wifi:Set ps type: 0, coexist: 0

I (14618) wifi_helper: ‚úÖ WiFi power saving DISABLED - max performance mode
I (14618) wifi:(2.4G)set country: cc=US  schan=1 nchan=11 policy=0

I (14628) wifi_helper: ‚úÖ Country code set to US (channels 1-11, 21dBm max power)
I (14628) wifi_helper: ‚úÖ WiFi protocol set to 802.11b/g/n
I (14628) wifi_helper: ‚úÖ WiFi bandwidth set to 40MHz
I (14628) wifi_helper: üöÄ WiFi performance optimizations applied!
I (14628) wifi_helper: WiFi helper initialized successfully with performance optimizations
I (14628) wifi:mode : sta (8c:bf:ea:85:39:8c)
I (14628) wifi:enable tsf
I (14628) wifi_helper: ‚úÖ Scan task created successfully, handle: 0x3fcec038
I (14628) wifi_helper: üîç Triggering immediate WiFi scan for instant network list
I (14628) wifi_helper: ‚úÖ Immediate scan task notification sent
I (14628) wifi_helper: Starting periodic WiFi scan...
I (14628) wifi_helper: Continuous WiFi scanning started successfully
I (14628) BLE_HANDLER: ‚úÖ WiFi scanning started - will send networks via BLE notifications
I (14628) neopixel: Stopping any running LED animation
I (14628) neopixel: LED animation stopped
I (14628) neopixel: Stopping any running LED animation
I (14628) neopixel: LED animation stopped
I (14638) BLE_HANDLER: üõë Advertising stopped - Device no longer discoverable
I (14638) wifi_helper: WIFI_EVENT_STA_START received - awaiting explicit connect
I (14648) BLE_HANDLER: GAP event: 21
I (14648) BLE_HANDLER: MTU exchanged - new MTU: 517 bytes
I (15268) BLE_HANDLER: Connection params updated - status: 0, min_int: 16, max_int: 32, latency: 0, timeout: 400
I (15778) BLE_HANDLER: Connection params updated - status: 0, min_int: 0, max_int: 0, latency: 0, timeout: 400
{'level': 'success', 'message': 'Connected to device', 'data': None, 'timestamp': 1761695695.4187741}
I (16508) BLE_HANDLER: Data written - handle: 58, length: 2
I (16508) BLE_HANDLER: 0x3c192dca   01 00                                             |..|
I (16508) BLE_HANDLER: Descriptor write - handle: 58, value: 0x0001
I (16518) BLE_HANDLER: ‚úÖ Client SUBSCRIBED to notifications
I (16518) BLE_HANDLER: üì° Sending immediate WiFi state to new subscriber
I (16518) BLE_HANDLER: ‚úÖ Immediate WiFi state sent successfully
I (16518) BLE_HANDLER: Sent GATT write response
I (16518) BLE_HANDLER: GATTS event: 21
I (16518) BLE_HANDLER: Indication confirmed by client - handle: 47, status: 0
{'level': 'success', 'message': 'Bluetooth notifications started', 'data': None, 'timestamp': 1761695695.449949}
‚úÖ Connected to Bluetooth device. Waiting for services to stabilize...
{'level': 'info', 'message': 'Starting test: Test Mic L/R Balance', 'data': None, 'timestamp': 1761695696.4533107}
{'level': 'info', 'message': '[BLE TX] {"id":"qa_mic_lr_test_1761695696","type":"qa_mic_lr_test","payload":{"wait_ms": 2000, "tone_ms": 2000, "volume_percent": 95, "freq_hz": 1000}}', 'data': None, 'timestamp': 1761695696.4533107}
I (17568) BLE_HANDLER: Data written - handle: 55, length: 142
I (17568) BLE_HANDLER: 0x3c192f12   7b 22 69 64 22 3a 22 71  61 5f 6d 69 63 5f 6c 72  |{"id":"qa_mic_lr|
I (17568) BLE_HANDLER: 0x3c192f22   5f 74 65 73 74 5f 31 37  36 31 36 39 35 36 39 36  |_test_1761695696|
I (17568) BLE_HANDLER: 0x3c192f32   22 2c 22 74 79 70 65 22  3a 22 71 61 5f 6d 69 63  |","type":"qa_mic|
I (17568) BLE_HANDLER: 0x3c192f42   5f 6c 72 5f 74 65 73 74  22 2c 22 70 61 79 6c 6f  |_lr_test","paylo|
I (17568) BLE_HANDLER: 0x3c192f52   61 64 22 3a 7b 22 77 61  69 74 5f 6d 73 22 3a 20  |ad":{"wait_ms": |
I (17568) BLE_HANDLER: 0x3c192f62   32 30 30 30 2c 20 22 74  6f 6e 65 5f 6d 73 22 3a  |2000, "tone_ms":|
I (17568) BLE_HANDLER: 0x3c192f72   20 32 30 30 30 2c 20 22  76 6f 6c 75 6d 65 5f 70  | 2000, "volume_p|
I (17568) BLE_HANDLER: 0x3c192f82   65 72 63 65 6e 74 22 3a  20 39 35 2c 20 22 66 72  |ercent": 95, "fr|
I (17568) BLE_HANDLER: 0x3c192f92   65 71 5f 68 7a 22 3a 20  31 30 30 30 7d 7d        |eq_hz": 1000}}|
I (17568) BLE_HANDLER: QA control received (142 bytes)
I (17568) wifi_helper: Stopping continuous WiFi scanning
I (17568) wifi_helper: WiFi scan task ending
I (17668) wifi_helper: Continuous WiFi scanning stopped
I (17668) BLE_HANDLER: üõë WiFi scanning stopped (explicit)
Boost enable pin configured and set high (normal logic)
I (17668) SHARED_I2C: ‚úÖ Added I2C device: address=0x6C, speed=100000 Hz
TFA9879 I2C device initialized on shared bus (address: 0x6C)
I2C initialized successfully

Initializing TFA9879...
------------------------
Powering down...
Device Control after powerdown: 0x0000
Configuring I2S interface (Philips format)...
Serial IF Ctrl after config: 0x08D8
Powering up...
Device Control after powerup: 0x0001
Setting default volume...
Setting volume to 0x90 (reg=0x1090)
Disabling power limiting...
Power Limit after disable: 0x0000
Configuring bypass control...
Bypass Ctrl after config: 0x0008
Configuring DRC...
DRC Control after config: 0x92BA
Enabling audio output...
Device Control after audio out enable: 0x0009

TFA9879 Register Verification:
------------------------

--- TFA9879 Register Dump ---
Device Control (0x00): 0x0009
Serial IF Ctrl (0x01): 0x08D8
Status (0x02): 0x0007
Battery Voltage (0x03): 0x0A18
Temperature (0x04): 0x0007
Fault (0x05): 0x59DD
Volume Control (0x13): 0x1090
Mute/Power Limit (0x14): 0x0000
Bypass Ctrl (0x0F): 0x0008
DRC Control (0x10): 0x92BA
--- End Register Dump ---


TFA9879 initialization complete
Setting volume to 0x39 (reg=0x1039)
I (17708) BLE_HANDLER: QA mic_lr_test: amp volume set to 57 (percent=95)
I (17708) audio_system: Initializing audio system for PDM_v2 hardware
I (17708) audio_system: PDM Mic RX config: CLK=10, DATA=11, I2S_NUM=0
I (17708) audio_system: PDM Mic RX total DMA buf size: 8192
I (17708) audio_system: üß† PDM_SETUP TOTAL: -9232 bytes
I (17708) audio_system: Speaker TX config: BCLK=38, WS=47, DOUT=39, I2S_NUM=1
I (17718) audio_system: üß† SPEAKER_SETUP TOTAL: -4684 bytes
I (17718) audio_system: Audio system initialized successfully
I (17718) BLE_HANDLER: QA mic_lr_test start: wait_ms=2000, tone_ms=2000, vol=95, freq=1000, sr=16000
I (17718) BLE_HANDLER: QA mic_lr_test: Phase 1 - capturing baseline (2000 ms)
I (19448) wifi_helper: WiFi scan completed
I (19718) BLE_HANDLER: QA mic_lr_test: baseline captured 31744 samples
I (19718) BLE_HANDLER: QA mic_lr_test: Phase 2 - playing tone and capturing (2000 ms)
I (19718) BLE_HANDLER: üéµ TONE TRACKING INITIALIZED:
I (19718) BLE_HANDLER:   üìä Expected tone start: sample 31744 (1984.0 ms)
I (19718) BLE_HANDLER:   üìä Expected tone end: sample 63744 (3984.0 ms)
I (19728) BLE_HANDLER: üéôÔ∏è RECORDING PROGRESS: sample 31744 (1984.0 ms), speaker: NOT STARTED
I (19738) BLE_HANDLER: üîä SPEAKER START: First audio written at sample 32256 (2016.0 ms), wrote 1024 bytes
I (20238) BLE_HANDLER: üéôÔ∏è RECORDING PROGRESS: sample 39936 (2496.0 ms), speaker: ACTIVE
I (20748) BLE_HANDLER: üéôÔ∏è RECORDING PROGRESS: sample 48128 (3008.0 ms), speaker: ACTIVE
I (21268) BLE_HANDLER: üéôÔ∏è RECORDING PROGRESS: sample 56320 (3520.0 ms), speaker: ACTIVE
I (21708) BLE_HANDLER: üîä SPEAKER END: Tone finished at sample 64000 (4000.0 ms)
I (21708) BLE_HANDLER: üéµ ACTUAL TONE DURATION: 1984.0 ms (31744 samples)
I (21708) BLE_HANDLER: QA mic_lr_test: capture complete (64000 samples total)
I (21708) BLE_HANDLER: üìä DETAILED RMS ANALYSIS (250ms windows across 4 seconds):
I (21708) BLE_HANDLER:     Time(ms)  | Left RMS | Right RMS | L/R Ratio | Notes
I (21708) BLE_HANDLER:     ---------|----------|-----------|-----------|------------------
I (21718) BLE_HANDLER:        0- 250 |   8747.7 |    8663.2 |     1.010 | BASELINE
I (21718) BLE_HANDLER:      250- 500 |   2553.6 |    2353.6 |     1.085 | BASELINE
I (21718) BLE_HANDLER:      500- 750 |   2527.1 |    2423.9 |     1.043 | BASELINE
I (21718) BLE_HANDLER:      750-1000 |   2547.6 |    2477.4 |     1.028 | BASELINE
I (21718) BLE_HANDLER:     1000-1250 |   2537.5 |    2500.3 |     1.015 | BASELINE
I (21718) BLE_HANDLER:     1250-1500 |   2557.3 |    2465.2 |     1.037 | BASELINE
I (21718) BLE_HANDLER:     1500-1750 |   2549.9 |    2459.8 |     1.037 | BASELINE
I (21718) BLE_HANDLER:     1750-2000 |   2514.0 |    2462.8 |     1.021 | BASELINE
I (21718) BLE_HANDLER:     2000-2250 |   4553.3 |    3555.8 |     1.281 | TONE EXPECTED
I (21728) BLE_HANDLER:     2250-2500 |   5752.2 |    4220.9 |     1.363 | TONE ACTIVE
I (21728) BLE_HANDLER:     2500-2750 |   5718.7 |    4213.8 |     1.357 | TONE ACTIVE
I (21728) BLE_HANDLER:     2750-3000 |   5715.4 |    4219.6 |     1.354 | TONE ACTIVE
I (21728) BLE_HANDLER:     3000-3250 |   5695.0 |    4206.8 |     1.354 | TONE ACTIVE
I (21728) BLE_HANDLER:     3250-3500 |   5691.4 |    4206.6 |     1.353 | TONE ACTIVE
I (21728) BLE_HANDLER:     3500-3750 |   5677.9 |    4183.3 |     1.357 | TONE ACTIVE
I (21728) BLE_HANDLER:     3750-4000 |   5669.2 |    4167.2 |     1.360 | TONE ACTIVE
I (21728) BLE_HANDLER: üìä RMS ANALYSIS COMPLETE - Look for signal increase during TONE ACTIVE periods
I (21728) BLE_HANDLER: üéØ USING ACTUAL SPEAKER TIMING FOR ANALYSIS:
I (21728) BLE_HANDLER:   üìä Actual speaker: samples 32256 - 64000 (2016.0 - 4000.0 ms)
I (21728) BLE_HANDLER:   üìä Analysis window: samples 40128 - 56128 (2508.0 - 3508.0 ms, 16000 samples)
I (21728) BLE_HANDLER: QA mic_lr_test timeline: wait_ms=2000 tone_ms=2000 total_ms=4000
I (21728) BLE_HANDLER: QA mic_lr_test windows(ms): baseline [984..1984], tone [2508..3508]
I (21808) BLE_HANDLER: üîç DETAILED MIC TEST ANALYSIS:
I (21808) BLE_HANDLER:   üìä Left Detection:
I (21808) BLE_HANDLER:     - Tone RMS: 5705.5 > Baseline*1.5 (3807.4) = PASS
I (21808) BLE_HANDLER:     - Correlation: 1.00 >= 0.70 = PASS
I (21808) BLE_HANDLER:     - Overall Left: PASS
I (21808) BLE_HANDLER:   üìä Right Detection:
I (21808) BLE_HANDLER:     - Tone RMS: 4211.6 > Baseline*1.5 (3706.3) = PASS
I (21808) BLE_HANDLER:     - Correlation: 1.00 >= 0.70 = PASS
I (21808) BLE_HANDLER:     - Overall Right: PASS
I (21808) BLE_HANDLER:   üìä L/R Balance:
I (21808) BLE_HANDLER:     - Balance: 2.6 dB (abs=2.6) <= 4.0 dB = PASS
I (21808) BLE_HANDLER:     - L/R Correlation: 0.99 >= 0.50 = PASS
I (21808) BLE_HANDLER:     - Overall L/R Match: PASS
I (21808) BLE_HANDLER:   üéØ FAILURE ANALYSIS:
I (21808) BLE_HANDLER: QA mic_lr_test result: {"kind":"mic_lr_test","payload":{"sr":16000,"wait_ms":2000,"tone_ms":2000,"freq":1000,"vol":95,"baseline":{"rms_L":2538.3,"rms_R":2470.9},"tone":{"rms_L":5705.5,"rms_R":4211.6,"corr_L":1.00,"corr_R":1.00,"lr_corr":0.99,"balance_db":2.6},"detect":{"left":true,"right":true,"lr_match":true},"pass":true}}
I (21808) BLE_HANDLER: QA mic_lr_test window: baseline idx=15744 len=16000; tone idx=40128 len=16000
I (21808) BLE_HANDLER: QA mic_lr_test summary:
baseline rms L/R: 2538.3 / 2470.9
tone: rms L/R: 5705.5 / 4211.6, corr L/R: 1.00 / 1.00, lr_corr: 0.99, balance: 2.6 dB
detect: left=true right=true lr_match=true
OVERALL PASS: true
I (21808) BLE_HANDLER: üîç Starting continuous WiFi scanning for BLE client
I (21808) wifi_helper: Starting continuous WiFi scanning every 15000 ms
I (21808) wifi_helper: ‚úÖ Scan task created successfully, handle: 0x3fcec038
I (21808) wifi_helper: üîç Triggering immediate WiFi scan for instant network list
I (21808) wifi_helper: ‚úÖ Immediate scan task notification sent
I (21808) wifi_helper: Starting periodic WiFi scan...
I (21808) wifi_helper: Continuous WiFi scanning started successfully
I (21808) BLE_HANDLER: ‚úÖ WiFi scanning started - will send networks via BLE notifications
I (21818) BLE_HANDLER: Sent GATT write response
I (21818) BLE_HANDLER: Connection params updated - status: 0, min_int: 0, max_int: 0, latency: 0, timeout: 400
I (21818) BLE_HANDLER: GATTS event: 21
I (21828) BLE_HANDLER: Indication confirmed by client - handle: 57, status: 0
{'level': 'info', 'message': '[BLE RX] {"kind":"mic_lr_test","payload":{"sr":16000,"wait_ms":2000,"tone_ms":2000,"freq":1000,"vol":95,"baseline":{"rms_L":2538.3,"rms_R":2470.9},"tone":{"rms_L":5705.5,"rms_R":4211.6,"corr_L":1.00,"corr_R":1.00,"lr_corr":0.99,"balance_db":2.6},"detect":{"left":true,"right":true,"lr_match":true},"pass":true}} ', 'data': None, 'timestamp': 1761695700.8500845}
{'level': 'success', 'message': 'Processing microphone test results', 'data': None, 'timestamp': 1761695700.8500845}
{'level': 'info', 'message': 'Left channel: 5705.5 RMS (PASS)', 'data': None, 'timestamp': 1761695700.8500845}
{'level': 'info', 'message': 'Right channel: 4211.6 RMS (FAIL)', 'data': None, 'timestamp': 1761695700.8500845}
{'level': 'error', 'message': 'Test completed: FAIL', 'data': None, 'timestamp': 1761695700.8500845}
MAC Address: 8C:BF:EA:85:39:8E
I (26628) wifi_helper: WiFi scan completed
I (26628) wifi_helper: Found 6 networks, sending top 6 to BLE callback
I (26628) BLE_HANDLER: üì° Updating WiFi state with 6 available networks
I (26628) BLE_HANDLER: üì§ Complete WiFi state: {"ssid":null,"strength":0,"connected":false,"available":[{"ssid":"Verizon_ZYF9LZ","rssi":-35,"auth":"secured"},{"ssid":"MagicalToys","rssi":-54,"auth":"secured"},{"ssid":"S23+ de JoƒÅo Carlos","rssi":-75,"auth":"secured"},{"ssid":"ChoppedFi","rssi":-77,"auth":"secured"},{"ssid":"Trabzon","rssi":-78,"auth":"secured"}]}
I (26628) BLE_HANDLER: ‚úÖ Complete WiFi state sent (319 bytes)
I (26628) wifi_helper: ‚úÖ WiFi scan completed - BLE client will receive complete state update
I (26628) wifi_helper: WiFi scan completed
I (26628) BLE_HANDLER: Indication confirmed by client - handle: 47, status: 0
I (36808) wifi_helper: Starting periodic WiFi scan...
üéØ QA TEST RESULTS:
==================================================
Test: Test Mic L/R Balance
Result: ‚ùå FAIL
Details: L: 5705.5 RMS, R: 4211.6 RMS [Threshold: >4500]
Audio Balance: Unbalanced ‚ö†Ô∏è
RMS L: 5705.5
RMS R: 4211.6
------------------------------
Summary: 0/1 tests passed
‚ö†Ô∏è SOME TESTS FAILED - Device requires attention
üîß Please check the microphones and readjust the plush's felt/fabric
==================================================
üîÑ Try Again button shown - user can retry Bluetooth QC
‚ö†Ô∏è Failed to store QC results in Firebase
{'level': 'info', 'message': 'Disconnected from Bluetooth device', 'data': None, 'timestamp': 1761695716.5628653}
‚úÖ ESP32 detected on port COM31
W (40718) BT_HCI: hcif disc complete: hdl 0x1, rsn 0x13
I (40718) BLE_HANDLER: Client disconnected - conn_id: 0, reason: 0x13 (Remote User Terminated)
I (40718) BLE_HANDLER: Connection stats: duration=26122 ms, idle_time=23149 ms
I (40718) wifi_helper: Stopping continuous WiFi scanning
I (40718) wifi_helper: WiFi scan task ending
I (40818) wifi_helper: Continuous WiFi scanning stopped
I (40818) BLE_HANDLER: üõë WiFi scanning stopped (explicit)
I (40818) BLE_HANDLER: Connection status changed to: DISCONNECTED
I (40818) BLE_HANDLER: Connection status changed to: ADVERTISING
I (40818) BLE_HANDLER: ‚úì BLE advertising started with optimized configuration
I (40818) BLE_HANDLER: ‚úì Service UUID in advertising data: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (40818) BLE_HANDLER: ‚úì Device name in scan response: Toy-398C
I (40818) BLE_HANDLER: ‚úì React Native app should now be able to discover this device
I (40818) led_manager: Clearing LED state overrides
I (40818) neopixel: Stopping any running LED animation
I (40818) neopixel: LED animation stopped
I (40818) neopixel: Stopping any running LED animation
I (40818) neopixel: LED animation stopped
I (40818) BLE_HANDLER: ‚úì Advertising data configured successfully
I (40818) BLE_HANDLER: ‚úì Service UUID a07498ca-ad5b-474e-940d-16f1fbe7e8cd is now in advertising data
I (40818) BLE_HANDLER: ‚úì Scan response data set complete successfully
I (40818) BLE_HANDLER: ‚úì Device name and TX power are now in scan response
I (40818) BLE_HANDLER: üöÄ ADVERTISING STARTED SUCCESSFULLY!
I (40818) BLE_HANDLER: üîç React Native app should now be able to find this device
I (40818) BLE_HANDLER: üì± Device appears as: Toy-398C
I (40818) BLE_HANDLER: üîó Service UUID: a07498ca-ad5b-474e-940d-16f1fbe7e8cd
I (40818) BLE_HANDLER: ‚ö° The device is now discoverable and ready for connection!
I (41618) wifi_helper: WiFi scan completed
I (41618) wifi_helper: WiFi scan completed
I (61398) BATTERY_MONITOR: üîç Coulomb SoC calc: REG_QH=0x0582 ‚Üí 705.0 mAh ‚Üí 11.8% SoC
I (61408) BATTERY_MONITOR: === BATTERY STATUS ===
I (61408) BATTERY_MONITOR: Present:     YES
I (61408) BATTERY_MONITOR: Voltage:     3.387 V
I (61408) BATTERY_MONITOR: USB Power:   DETECTED
I (61408) BATTERY_MONITOR: Charge IC:   CHARGING IN PROGRESS (STAT1=1, STAT2=0)
I (61408) BATTERY_MONITOR: Current:     520.9 mA
I (61408) BATTERY_MONITOR: Avg Current: 444.2 mA
I (61408) BATTERY_MONITOR: SOC:         11.8%
I (61408) BATTERY_MONITOR: Temperature: 29.7¬∞C
I (61408) BATTERY_MONITOR: Cycles:      11
I (61408) BATTERY_MONITOR: Charging:    YES
I (61408) BATTERY_MONITOR: Session:     #0
I (61408) BATTERY_MONITOR: ======================
--- Device COM31 disconnected. Closing monitor. ---
--- Serial monitor for COM31 stopped. ---
üåê Language changed to zh_CN - refreshing all UI texts
üåê Language changed to zh_CN - refreshing all UI texts
üåê Language changed to en - refreshing all UI texts
üåê Language changed to zh_CN - refreshing all UI texts
