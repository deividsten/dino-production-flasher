--- Session Log Started: 2025-10-28 15:40:09 ---

('Firebase', '🚀 Starting DinoCore Production Flasher')
('Firebase', '📍 Working directory: C:\\Users\\deivi\\OneDrive\\Documents\\Dino\\try 6\\cleaned_gui_flasher')
('Firebase', '🐍 Python version: 3.12.6 (tags/v3.12.6:a4a2d2b, Sep  6 2024, 20:11:23) [MSC v.1940 64 bit (AMD64)]')
('Firebase', '⚠️ Firebase not available')
🚀 Starting QR Scanner Workflow - Field ready for scanning!
📱 Position QR scanner and scan toy code...
🏠 User clicked 'Reset Workflow' - restarting from beginning...
🔄 Reset API payload flag - ready to send data for new device
🔄 Cleared BLE ready event
🔄 Cleared session logs for new device
📋 Input received: asdasd
🆔 Processed Toy ID: asdasd
✅ ESP32 detected on port COM21
🏠 User clicked 'Reset Workflow' - restarting from beginning...
🔄 Reset API payload flag - ready to send data for new device
🔄 Cleared BLE ready event
🔄 Cleared session logs for new device
📋 Input received: asdasda
🆔 Processed Toy ID: asdasda
✅ ESP32 detected on port COM21
✅ Device ready on port: COM21
🎯 Using default hardware version: 1.9.1
✅ ESP32 detected on port COM21
🚀 Auto-starting Testing & eFuse flash...
--- Processing new device on COM21 ---
Attempting to burn eFuse with version 1.9.1...
Attempting to burn eFuse with version 1.9.1...
Attempting to reset device into download mode...
🏠 User clicked 'Reset Workflow' - restarting from beginning...
🔄 Reset API payload flag - ready to send data for new device
🔄 Cleared BLE ready event
🔄 Cleared session logs for new device
📋 Input received: asasd
🆔 Processed Toy ID: asasd
✅ ESP32 detected on port COM21
✅ Device ready on port: COM21
🎯 Using default hardware version: 1.9.1
✅ ESP32 detected on port COM21
🚀 Auto-starting Testing & eFuse flash...
--- Processing new device on COM21 ---
Attempting to burn eFuse with version 1.9.1...
Attempting to burn eFuse with version 1.9.1...
Attempting to reset device into download mode...
Device reset failed, but continuing with eFuse burning...
Could not burn eFuse. It might be already written.
eFuse burn error: 
A fatal error occurred: Could not open COM21, the port is busy or doesn't exist.
(could not open port 'COM21': PermissionError(13, 'Access is denied.', None, 5))

Hint: Check if the port is not used by another task

Please make sure you specified the right port with --port.
Burn command failed. Attempting to read existing version...
Attempting to read eFuse from COM21...
[X] Failed to read eFuse. Maybe locked?
[X] Could not read existing version after burn failure. Stopping.
✅ ESP32 detected on port COM21
Device reset error: Command '['C:\\Python312\\python.exe', '-m', 'esptool', '--chip', 'esp32s3', '-p', 'COM21', '--before=default_reset', '--after=hard_reset', 'chip_id']' timed out after 10 seconds, but continuing...
🏠 User clicked 'Reset Workflow' - restarting from beginning...
🔄 Reset API payload flag - ready to send data for new device
🔄 Cleared BLE ready event
🔄 Cleared session logs for new device
🌐 Language changed to zh_CN - refreshing all UI texts
🌐 Language changed to en - refreshing all UI texts
🌐 Language changed to zh_CN - refreshing all UI texts
Could not burn eFuse. It might be already written.
eFuse burn error: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\espefuse\__main__.py", line 8, in <module>
    espefuse._main()
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\espefuse\__init__.py", line 227, in _main
    main()
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\espefuse\__init__.py", line 218, in main
    cli(args=args, esp=esp)
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\esptool\cli_util.py", line 229, in __call__
    return super().__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\rich_click\rich_command.py", line 404, in __call__
    return super().__call__(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\click\core.py", line 1161, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\rich_click\rich_command.py", line 187, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\click\core.py", line 1706, in invoke
    super().invoke(ctx)
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\click\core.py", line 1443, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\click\core.py", line 788, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\espefuse\__init__.py", line 137, in cli
    esp = get_esp(
          ^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\espefuse\efuse_interface.py", line 194, in get_esp
    esp.connect(before)
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\esptool\loader.py", line 790, in connect
    last_error = self._connect_attempt(reset_strategy, mode)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\esptool\loader.py", line 685, in _connect_attempt
    self.sync()
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\esptool\loader.py", line 599, in sync
    val, _ = self.command(
             ^^^^^^^^^^^^^
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\esptool\loader.py", line 485, in command
    self.write(pkt)
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\esptool\loader.py", line 441, in write
    self._port.write(buf)
  File "C:\Users\deivi\AppData\Roaming\Python\Python312\site-packages\serial\serialwin32.py", line 325, in write
    raise SerialTimeoutException('Write timeout')
serial.serialutil.SerialTimeoutException: Write timeout
Burn command failed. Attempting to read existing version...
Attempting to read eFuse from COM21...
📋 Input received: asdasd
🆔 Processed Toy ID: asdasd
✅ ESP32 detected on port COM21
